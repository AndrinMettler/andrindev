<html>
  <head>
    <style>
      * {
        margin: 10px;
        padding: 5px;
        font-family: "Helvetica Neue", sans-serif;
        font-weight: 300;
      }
    </style>
  </head>

  <body>
    <h1>Dynamische Liste</h1>

    <ul id="liste">
    </ul>
    <script>
      /* Aufgabe:
       * Verwende deine Lösung der vorherigen Aufgabe (uebung_2_2)
       * als Grundlage (kopier deinen Code hierrein).
       *
       * Verwende fürs Aufbauen der Einträge den Render Ansatz.
       * Die angezeigten LI-Einträge sollen im simpsons Array verwaltet werden:
       * D.h. wenn du auf Entfernen klickst, soll der Eintrag aus dem simpson
       * Array entfernt werden und danach die Render Methode aufgerufen werden.
       * Auch beim hinzufügen eines neuen Eintrages, soll dies über das simpson
       * Array geschehen.

       * Der aktuelle Zustand des simpson Arrays soll in der LocalStorage
       * gespeichert werden, damit beim neuladen die Einträge wiederhergestellt
       * werden.
       *
       * Tipps: Verwende für das Erstellen der Nodes die forEach funktion.
       *        Verwende den Delegate Ansatz
       *        Verwende den Render Ansatz
       *        Wenn nichts in der LocalStorage vorhanden ist, verwende
                  simpsonJSON um das simpson Array zu befüllen, ansonsten
                  verwende den Eintrag aus localStorage

       * Zusatzaufgabe: Bau neben dem Löschen Knopf noch 2 Buttons ein:
       * Hoch & Runter, beim Klick werden die Einträge um 1 nach oben
       * oder unten geschoben.

       Erwartetes Resultat:
       <ul id="liste">
          <li>Bart Simpson (10) <button>Entfernen</button></li>
          <li>Homer Simpson (36) <button>Entfernen</button></li>
          <li>Lisa Simpson (8) <button>Entfernen</button></li>
          <li>Marge Simpson (34) <button>Entfernen</button></li>
          <li>Maggie Simpson (1) <button>Entfernen</button></li>
          <li>Hugo Simpson (10) <button>Entfernen</button></li>
          <li>Später Hinzugefügt (99) <button>Entfernen</button></li>
       </ul>
      */

      var simpsonJSON = '[{"firstname":"Bart","name":"Simpson","age":10,"sex":"m"},{"firstname":"Homer","name":"Simpson","age":36,"sex":"m"},{"firstname":"Lisa","name":"Simpson","age":8,"sex":"w"},{"firstname":"Marge","name":"Simpson","age":34,"sex":"w"},{"firstname":"Maggie","name":"Simpson","age":1,"sex":"w"},{"firstname":"Hugo","name":"Simpson","age":10,"sex":"m"}]';

      var javascriptObject = JSON.parse(simpsonJSON);
      javascriptObject.forEach(function (item) {
          var vorname = item.firstname;
          var name = item.name;
          var alter = item.age;
          var item1 = document.createElement("li");
          item1.innerHTML = item.firstname +" "  + " " + item.name +" "  +  "("+ item.age +")" + "<button>remove this simpson!</button>";
          var ziel = document.querySelector("#liste");
          ziel.appendChild(item1);
      });

      var button = document.querySelector("#liste");
      button.addEventListener("click", function (event) {
          if (event.target && event.target.matches("li button")){
              removeItem(event);
              function removeItem(event) {
                  event.target.parentNode.parentNode.removeChild(event.target.parentNode);
              }
          }
      });

      var knopf = document.querySelector("#save");
      knopf.addEventListener("click", addItem);

      function addItem() {
          var parentlist = document.querySelector("#liste");
          var input1 = document.querySelector("#vorname");
          var input2 = document.querySelector("#name");
          var input3 = document.querySelector("#alter");
          var newItem = document.createElement("li");
          newItem.innerHTML = input1.value +" "  + " " + input2.value +" "  +  "("+ input3.value +")" + "<button>remove this simpson!</button>";
          parentlist.appendChild(newItem);

      }




    </script>
  </body>
</html>


